<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Scrapyard Welder â€“ $GorWeldd Forge ğŸ”¥ğŸ—‘ï¸</title>
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <script src="https://unpkg.com/@solana/spl-token@latest/lib/index.iife.min.js"></script>
  <style>
    /* ten sam styl co wczeÅ›niej â€“ pominÄ…Å‚em dla krÃ³tszego kodu */
    body { margin:0; font-family:'Courier New',monospace; background:#0d0d0d; color:#eee; background:linear-gradient(to bottom,#1a0a00,#000); text-align:center; }
    h1 { color:#ff5500; text-shadow:0 0 15px #ff8800; }
    button { padding:12px 30px; background:#ff5500; color:white; border:none; border-radius:8px; cursor:pointer; margin:10px; }
    #status, #balance, #debug { color:#ffcc66; font-size:18px; margin:10px; }
  </style>
</head>
<body>

  <h1>ğŸ—‘ï¸ğŸ”¥ Scrapyard Welder â€“ Debug Version ğŸ”¥ğŸ—‘ï¸</h1>
  <button id="connect">Connect Backpack</button>
  <div id="status">Wallet: Not connected</div>
  <div id="balance">Balance: Checking...</div>
  <button id="check-balance">Check Balance Manually</button>
  <div id="debug">Debug: Open F12 â†’ Console for logs</div>

  <!-- reszta gry (welder clicker + guessing) â€“ dodaj jeÅ›li chcesz, tu skrÃ³cone -->

  <script>
    const { Connection, PublicKey, Transaction } = solanaWeb3;
    const { getAssociatedTokenAddressSync, createTransferInstruction, getAccount } = splToken;

    const RPCS = [
      "https://rpc.gorbagana.wtf",
      "https://rpc.trashscan.io",
      "https://api.gorbagana.dev"
    ];
    let connection = new Connection(RPCS[0], "confirmed");

    const TOKEN_MINT = new PublicKey("GCQ4NYEd2P8vRFDn9wadeE1KAPfckWpzJUUyzTqyimG7");
    const REVENUE_WALLET = new PublicKey("YOUR_WALLET_ADDRESS_HERE"); // ZmieÅ„!!!
    const DECIMALS = 9; // ZmieÅ„ na 6 jeÅ›li Trashscan pokazuje 6
    const FEE_AMOUNT = 100n * (10n ** BigInt(DECIMALS));

    let walletPublicKey = null;
    let provider = null;

    function tryNextRpc() {
      RPCS.push(RPCS.shift()); // rotate
      connection = new Connection(RPCS[0], "confirmed");
      console.log("Switched RPC to:", RPCS[0]);
    }

    document.getElementById('connect').onclick = async () => {
      provider = window.backpack;
      if (!provider || !provider.isBackpack) return alert("Install/use Backpack + add Gorbagana RPC!");
      try {
        await provider.connect();
        walletPublicKey = new PublicKey(provider.publicKey.toString());
        document.getElementById('status').innerText = `Wallet: ${walletPublicKey.toBase58().slice(0,6)}... Connected!`;
        await checkBalance();
      } catch (err) {
        console.error("Connect error:", err);
        document.getElementById('status').innerText = "Connect failed â€“ check Backpack / RPC";
      }
    };

    async function checkBalance() {
      if (!walletPublicKey) return;
      try {
        const ata = getAssociatedTokenAddressSync(TOKEN_MINT, walletPublicKey);
        const account = await getAccount(connection, ata);
        const balance = Number(account.amount) / 10**DECIMALS;
        document.getElementById('balance').innerText = `Your $GorWeldd: ${balance.toFixed(2)} (Multiplier based on hold)`;
        console.log("Balance OK:", balance);
      } catch (err) {
        console.error("Balance error:", err.message);
        document.getElementById('balance').innerText = "No ATA / low balance / RPC issue â€“ buy in Trash Bin";
        tryNextRpc(); // auto switch RPC on error
      }
    }

    document.getElementById('check-balance').onclick = checkBalance;

    // Dodaj tu resztÄ™ gry (welder.onclick, guessing, claim transfer) jak w poprzedniej wersji
    // PrzykÅ‚ad claim: uÅ¼yj createTransferInstruction + provider.signTransaction + sendRawTransaction
  </script>
</body>
</html>